<div class="grid grid-cols-1 md:grid-cols-2 gap-8 p-8 bg-gray-50 min-h-screen">
  <!-- ===================================================== -->
  <!-- üß© LEFT COLUMN ‚Äî PRODUCT DETAILS -->
  <!-- ===================================================== -->
  <div
    class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col"
  >
    <!-- üñºÔ∏è Product image -->
    <div class="relative">
      <img
        [src]="product?.product_image || 'https://via.placeholder.com/400x400?text=No+Image'"
        [alt]="product?.product_name"
        class="w-full h-72 object-cover"
      />
      <div
        class="absolute top-0 left-0 w-full flex justify-between items-center bg-black/40 text-white text-sm font-medium px-3 py-2"
      >
        <span>#{{ product?.product_id }}</span>
        <span class="truncate max-w-[70%] text-right">{{ product?.product_name }}</span>
      </div>
    </div>

    <!-- üí∞ Product info -->
    <div class="p-6 flex flex-col flex-grow justify-between">
      <div>
        <p class="text-gray-400 text-xs mb-2 italic">
          M√£ s·∫£n ph·∫©m: {{ product?.product_code }}
        </p>

        <!-- üíµ Gi√° v√† rating -->
        <p class="text-2xl font-bold text-gray-900 mb-1">
          {{ getDisplayedPrice() | currency:'VND':'symbol':'1.0-0' }}
        </p>

        <div class="flex items-center mb-4">
          <ng-container *ngFor="let s of [1,2,3,4,5]; let i = index">
            <svg
              [ngClass]="{
                'text-yellow-400': i < 4,
                'text-gray-300': i >= 4
              }"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 20 20"
              class="w-5 h-5"
            >
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.45a1 1 0 00-.364 1.118l1.287 3.956c.3.921-.755 1.688-1.54 1.118l-3.37-2.45a1 1 0 00-1.176 0l-3.37 2.45c-.784.57-1.838-.197-1.539-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.075 9.383c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69l1.274-3.956z"
              />
            </svg>
          </ng-container>
          <span class="text-gray-700 text-sm ml-2">4.0</span>
          <span class="text-gray-400 text-sm ml-2">(512 l∆∞·ª£t ƒë√°nh gi√°)</span>
        </div>

        <!-- üí≤ Ch·ªçn lo·∫°i gi√° -->
        <div class="mb-5">
        <p class="text-sm font-medium text-gray-900 mb-2">Ch·ªçn lo·∫°i gi√°</p>
        <div class="flex gap-2 flex-wrap">
            <button
            *ngFor="let type of priceTypes"
            (click)="selectPriceType(type)"
            type="button"
            [disabled]="!isPriceAvailable(type)"
            class="px-3 py-2 text-sm rounded-md border transition focus:outline-none"
            [ngClass]="{
                'border-indigo-600 bg-indigo-50 text-indigo-700': selectedPriceType === type && isPriceAvailable(type),
                'border-gray-300 text-gray-800 hover:border-indigo-500': selectedPriceType !== type && isPriceAvailable(type),
                'bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed opacity-60': !isPriceAvailable(type)
            }"
            >
            {{ type }}
            </button>
        </div>
        </div>

        <!-- ‚òï Ph√¢n lo·∫°i ly -->
        <div class="mb-5">
          <p class="text-sm font-medium text-gray-900 mb-2">Ph√¢n lo·∫°i ly</p>
          <div class="flex gap-2 flex-wrap">
            <button
              *ngFor="let type of cupTypes"
              type="button"
              (click)="selectCupType(type)"
              class="px-3 py-2 text-sm rounded-md border transition focus:outline-none"
              [ngClass]="
                selectedCupType === type
                  ? 'border-indigo-600 bg-indigo-50 text-indigo-700'
                  : 'border-gray-300 text-gray-800 hover:border-indigo-500'
              "
            >
              {{ type }}
            </button>
          </div>
        </div>

        <!-- üßÉ Dung t√≠ch ly -->
        <div class="mb-5">
          <div class="flex justify-between items-center mb-2">
            <p class="text-sm font-medium text-gray-900">Dung t√≠ch ly</p>
            <a href="#" class="text-sm text-indigo-600 hover:text-indigo-500"
              >H∆∞·ªõng d·∫´n ch·ªçn ly</a
            >
          </div>
          <div class="grid grid-cols-4 gap-2">
            <button
              *ngFor="let size of cupSizes"
              type="button"
              (click)="selectCupSize(size)"
              class="p-2 text-sm rounded-md border transition focus:outline-none"
              [ngClass]="
                selectedCupSize === size
                  ? 'border-indigo-600 bg-indigo-50 text-indigo-700'
                  : 'border-gray-300 text-gray-800 hover:border-indigo-500'
              "
            >
              {{ size }}
            </button>
          </div>
        </div>
      </div>

      <!-- üõí Action buttons -->
      <div>
        <button
          class="w-full mt-3 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-md font-medium transition"
        >
          Mua h√†ng
        </button>
        <button
          routerLink="/products"
          class="mt-3 w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-md font-medium transition"
        >
          ‚Üê Quay l·∫°i danh s√°ch
        </button>
      </div>
    </div>
  </div>

  <!-- ===================================================== -->
  <!-- üó£Ô∏è RIGHT COLUMN ‚Äî CUSTOMER REVIEWS -->
  <!-- ===================================================== -->
  <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6">
    <h3 class="text-xl font-bold mb-6 text-gray-800">ƒê√°nh gi√° c·ªßa kh√°ch h√†ng</h3>

    <div *ngFor="let r of reviews" class="flex gap-4 mb-6">
      <!-- Avatar -->
      <img
        [src]="r.avatar"
        [alt]="r.name"
        class="w-14 h-14 rounded-full object-cover border border-gray-200"
      />

      <!-- N·ªôi dung review -->
      <div>
        <p class="font-semibold text-gray-800">{{ r.name }}</p>
        <div class="flex items-center mb-1">
          <ng-container *ngFor="let s of getStars(r.rating)">
            <svg
              *ngIf="s"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 20 20"
              class="w-4 h-4 text-yellow-400"
            >
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.45a1 1 0 00-.364 1.118l1.287 3.956c.3.921-.755 1.688-1.54 1.118l-3.37-2.45a1 1 0 00-1.176 0l-3.37 2.45c-.784.57-1.838-.197-1.539-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.075 9.383c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69l1.274-3.956z"
              />
            </svg>
          </ng-container>
        </div>
        <p class="font-medium text-gray-900">{{ r.title }}</p>
        <p class="text-sm text-gray-600">{{ r.comment }}</p>
      </div>
    </div>
          <!-- üßæ FORM G·ª¨I REVIEW -->
    <div class="border-t border-gray-200 pt-6 mt-6">
    <h3 class="text-lg font-semibold mb-4 text-gray-800">G·ª≠i ƒë√°nh gi√° c·ªßa b·∫°n</h3>

    <!-- ‚≠ê Rating -->
    <div class="flex items-center mb-4">
        <ng-container *ngFor="let s of [1,2,3,4,5]; let i = index">
        <svg
            (click)="setRating(i + 1)"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            [ngClass]="{
            'text-yellow-400 cursor-pointer': i < newRating,
            'text-gray-300 cursor-pointer hover:text-yellow-300': i >= newRating
            }"
            viewBox="0 0 20 20"
            class="w-7 h-7 transition"
        >
            <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.45a1 1 0 00-.364 1.118l1.287 3.956c.3.921-.755 1.688-1.54 1.118l-3.37-2.45a1 1 0 00-1.176 0l-3.37 2.45c-.784.57-1.838-.197-1.539-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.075 9.383c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69l1.274-3.956z"
            />
        </svg>
        </ng-container>
    </div>

    <!-- üë§ T√™n ng∆∞·ªùi d√πng -->
    <input
        [(ngModel)]="newName"
        type="text"
        placeholder="T√™n c·ªßa b·∫°n"
        class="w-full border border-gray-300 rounded-md px-3 py-2 mb-3 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"
    />

    <!-- üí¨ B√¨nh lu·∫≠n -->
    <textarea
        [(ngModel)]="newComment"
        rows="4"
        placeholder="Chia s·∫ª c·∫£m nh·∫≠n c·ªßa b·∫°n v·ªÅ s·∫£n ph·∫©m..."
        class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none"
    ></textarea>

    <!-- üì§ Submit -->
    <button
        (click)="submitReview()"
        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-md font-medium transition"
    >
        G·ª≠i ƒë√°nh gi√°
    </button>
    </div>
  </div>
</div>
